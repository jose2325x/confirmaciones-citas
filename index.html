<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Confirmación de Cita</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 100px;
        }
        h2 {
            color: green;
        }
    </style>
</head>
<body>
    <h2>✅ Gracias por confirmar</h2>
    <p>Su acción ha sido registrada correctamente.</p>

    <!-- Imagen invisible que dispara el webhook -->
    <img id="webhook-trigger" src="" style="display:none;" />

    <script>
        // Función para obtener parámetros de la URL
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // Obtener parámetros de la URL
        var cita_id = getUrlParameter('cita_id');
        var accion = getUrlParameter('accion');

        // Construir la URL del webhook
        if (cita_id && accion) {
            var webhookUrl = 'https://prod-54.westus.logic.azure.com/workflows/e6ca8021d694492998bd18f5e45dbbb5/triggers/manual/paths/invoke/confirmacioncita?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=A8h4p5aTqsH7Irxmm0vGk8gSTmgqp5FbcCv-H5wy3tE&cita_id=' + encodeURIComponent(cita_id) + '&accion=' + encodeURIComponent(accion);

            // Asignar la URL al img para disparar la llamada
            document.getElementById('webhook-trigger').src = webhookUrl;
        }
    </script>
</body>
</html>